{% extends "admin/base.html" %}

{% block title %}Add New Course{% endblock %}

{% block content %}
<div class="card">
    <h2>ğŸ“š Add New Course</h2>
    <p>Create a new course in the system</p>
</div>

<div class="card">
    <form method="POST" id="addCourseForm">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group">
                <label>ğŸ“ Course Code *</label>
                <input type="text" name="course_code" placeholder="e.g., CS101, MATH201" required>
            </div>
            
            <div class="form-group">
                <label>ğŸ“– Course Name *</label>
                <input type="text" name="course_name" placeholder="e.g., Introduction to Programming" required>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group">
                <label>ğŸ‘¨â€ğŸ« Instructor *</label>
                <input type="text" name="instructor" placeholder="e.g., Dr. Smith" required>
            </div>
            
            <div class="form-group">
                <label>ğŸ¯ Program/Major *</label>
                <select name="program" required>
                    <option value="">Select Program</option>
                    <optgroup label="Computer & IT">
                        <option value="Computer Science">Computer Science</option>
                        <option value="Information Technology">Information Technology</option>
                        <option value="Software Engineering">Software Engineering</option>
                        <option value="Cybersecurity">Cybersecurity</option>
                        <option value="Data Science">Data Science</option>
                        <option value="Artificial Intelligence">Artificial Intelligence</option>
                    </optgroup>
                    <optgroup label="Business">
                        <option value="Business Administration">Business Administration</option>
                        <option value="Accounting">Accounting</option>
                        <option value="Finance">Finance</option>
                        <option value="Marketing">Marketing</option>
                    </optgroup>
                    <optgroup label="Engineering">
                        <option value="Electrical Engineering">Electrical Engineering</option>
                        <option value="Mechanical Engineering">Mechanical Engineering</option>
                        <option value="Civil Engineering">Civil Engineering</option>
                    </optgroup>
                    <optgroup label="Science">
                        <option value="Biology">Biology</option>
                        <option value="Chemistry">Chemistry</option>
                        <option value="Physics">Physics</option>
                        <option value="Mathematics">Mathematics</option>
                    </optgroup>
                    <optgroup label="Arts & Humanities">
                        <option value="Psychology">Psychology</option>
                        <option value="Sociology">Sociology</option>
                        <option value="English Literature">English Literature</option>
                        <option value="History">History</option>
                    </optgroup>
                </select>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group">
                <label>ğŸ“… Schedule Days *</label>
                <select name="schedule_days" required>
                    <option value="">Select Days</option>
                    <option value="Monday">Monday</option>
                    <option value="Tuesday">Tuesday</option>
                    <option value="Wednesday">Wednesday</option>
                    <option value="Thursday">Thursday</option>
                    <option value="Friday">Friday</option>
                    <option value="Monday, Wednesday">Monday, Wednesday</option>
                    <option value="Tuesday, Thursday">Tuesday, Thursday</option>
                    <option value="Monday, Wednesday, Friday">Monday, Wednesday, Friday</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>â° Schedule Time *</label>
                <select name="schedule_time" required>
                    <option value="">Select Time</option>
                    <option value="8:00 AM - 9:30 AM">8:00 AM - 9:30 AM</option>
                    <option value="9:45 AM - 11:15 AM">9:45 AM - 11:15 AM</option>
                    <option value="11:30 AM - 1:00 PM">11:30 AM - 1:00 PM</option>
                    <option value="1:30 PM - 3:00 PM">1:30 PM - 3:00 PM</option>
                    <option value="3:15 PM - 4:45 PM">3:15 PM - 4:45 PM</option>
                    <option value="5:00 PM - 6:30 PM">5:00 PM - 6:30 PM</option>
                </select>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group">
                <label>ğŸ“Š Credits *</label>
                <select name="credits" required>
                    <option value="">Select Credits</option>
                    <option value="1">1 Credit</option>
                    <option value="2">2 Credits</option>
                    <option value="3">3 Credits</option>
                    <option value="4">4 Credits</option>
                    <option value="5">5 Credits</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>ğŸ‘¥ Maximum Capacity *</label>
                <input type="number" name="max_capacity" placeholder="e.g., 30" min="1" max="200" required>
            </div>
        </div>

        <div class="form-group">
            <label>ğŸ“‹ Course Description</label>
            <textarea name="description" rows="4" placeholder="Enter course description..." style="width: 100%; padding: 12px 16px; border: 2px solid #e2e8f0; border-radius: 10px; font-size: 16px; font-family: inherit;"></textarea>
        </div>

        <div style="display: flex; gap: 15px; margin-top: 25px;">
            <button type="submit" class="btn">â• Add Course</button>
            <a href="{{ url_for('admin_courses') }}" class="btn secondary">â† Back to Courses</a>
        </div>
    </form>
</div>

<script>
// Form validation for course code format
document.getElementById('addCourseForm').addEventListener('submit', function(e) {
    const courseCodeInput = document.querySelector('input[name="course_code"]');
    const courseCode = courseCodeInput.value.trim();
    const courseCodeRegex = /^[A-Z]{2,4}\d{3}$/;
    
    if (!courseCodeRegex.test(courseCode)) {
        e.preventDefault();
        alert('Please enter a valid course code (e.g., CS101, MATH201, PHY301)');
        courseCodeInput.focus();
    }
});
</script>
{% endblock %}
